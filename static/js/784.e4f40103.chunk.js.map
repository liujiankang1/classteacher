{"version":3,"file":"static/js/784.e4f40103.chunk.js","mappings":"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","sources":["components/MainLayout.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, useLocation, Outlet } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Drawer,\r\n  AppBar,\r\n  Toolbar,\r\n  List,\r\n  Typography,\r\n  Divider,\r\n  IconButton,\r\n  ListItem,\r\n  ListItemButton,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Avatar,\r\n  Menu,\r\n  MenuItem,\r\n  Tooltip,\r\n  useMediaQuery,\r\n  useTheme,\r\n  styled,\r\n  alpha,\r\n  ListSubheader\r\n} from '@mui/material';\r\nimport {\r\n  Menu as MenuIcon,\r\n  Dashboard,\r\n  People,\r\n  School,\r\n  Assessment,\r\n  EventNote,\r\n  MenuBook,\r\n  BarChart,\r\n  EventBusy,\r\n  Person,\r\n  Logout,\r\n  Settings,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  AdminPanelSettings,\r\n  EmojiEvents\r\n} from '@mui/icons-material';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\n// 默认头像\r\nconst DEFAULT_MALE_AVATAR = '/assets/images/default-male-avatar.png';\r\nconst DEFAULT_FEMALE_AVATAR = '/assets/images/default-female-avatar.png';\r\nconst DEFAULT_AVATAR = '/assets/images/default-avatar.png';\r\n\r\n// 根据性别获取默认头像\r\nconst getDefaultAvatar = (gender?: string): string => {\r\n  if (!gender) return DEFAULT_AVATAR;\r\n  \r\n  const normalizedGender = gender.toLowerCase();\r\n  if (normalizedGender === 'male') return DEFAULT_MALE_AVATAR;\r\n  if (normalizedGender === 'female') return DEFAULT_FEMALE_AVATAR;\r\n  \r\n  return DEFAULT_AVATAR;\r\n};\r\n\r\n// 样式化组件\r\nconst drawerWidth = 240;\r\n\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })<{\r\n  open?: boolean;\r\n}>(({ theme, open }) => ({\r\n  flexGrow: 1,\r\n  padding: theme.spacing(3),\r\n  transition: theme.transitions.create('margin', {\r\n    easing: theme.transitions.easing.sharp,\r\n    duration: theme.transitions.duration.leavingScreen,\r\n  }),\r\n  marginLeft: `-${drawerWidth}px`,\r\n  ...(open && {\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginLeft: 0,\r\n  }),\r\n}));\r\n\r\nconst AppBarStyled = styled(AppBar, {\r\n  shouldForwardProp: (prop) => prop !== 'open',\r\n})<{ open?: boolean }>(({ theme, open }) => ({\r\n  transition: theme.transitions.create(['margin', 'width'], {\r\n    easing: theme.transitions.easing.sharp,\r\n    duration: theme.transitions.duration.leavingScreen,\r\n  }),\r\n  backgroundImage: `linear-gradient(to right, ${theme.palette.primary.main}, ${theme.palette.primary.dark})`,\r\n  boxShadow: `0 2px 10px ${alpha(theme.palette.primary.main, 0.5)}`,\r\n  ...(open && {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    marginLeft: `${drawerWidth}px`,\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  }),\r\n}));\r\n\r\nconst DrawerHeader = styled('div')(({ theme }) => ({\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  padding: theme.spacing(0, 1),\r\n  ...theme.mixins.toolbar,\r\n  justifyContent: 'flex-end',\r\n}));\r\n\r\nconst LogoContainer = styled(Box)(({ theme }) => ({\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  padding: theme.spacing(2, 2),\r\n  ...theme.mixins.toolbar,\r\n  justifyContent: 'center',\r\n  borderBottom: `1px solid ${alpha(theme.palette.primary.main, 0.15)}`,\r\n  backgroundColor: alpha(theme.palette.primary.main, 0.05),\r\n  boxShadow: `0 2px 8px ${alpha(theme.palette.primary.main, 0.08)}`,\r\n  position: 'relative',\r\n  '&::after': {\r\n    content: '\"\"',\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: '10%',\r\n    right: '10%',\r\n    height: '2px',\r\n    background: `linear-gradient(90deg, transparent, ${alpha(theme.palette.primary.main, 0.6)}, transparent)`,\r\n  }\r\n}));\r\n\r\nconst StyledListItemButton = styled(ListItemButton)(({ theme }) => ({\r\n  borderRadius: '8px',\r\n  margin: '4px 8px',\r\n  padding: '8px 12px',\r\n  transition: 'all 0.2s ease-in-out',\r\n  '&:hover': {\r\n    backgroundColor: alpha(theme.palette.primary.main, 0.08),\r\n    transform: 'translateX(4px)',\r\n  },\r\n  '&.Mui-selected': {\r\n    backgroundColor: alpha(theme.palette.primary.main, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: alpha(theme.palette.primary.main, 0.2),\r\n    },\r\n    '&::before': {\r\n      content: '\"\"',\r\n      position: 'absolute',\r\n      left: 0,\r\n      top: '50%',\r\n      transform: 'translateY(-50%)',\r\n      height: '60%',\r\n      width: '4px',\r\n      backgroundColor: theme.palette.primary.main,\r\n      borderRadius: '0 4px 4px 0',\r\n    }\r\n  },\r\n}));\r\n\r\nconst StyledListSubheader = styled(ListSubheader)(({ theme }) => ({\r\n  backgroundColor: 'transparent',\r\n  color: theme.palette.text.secondary,\r\n  fontSize: '0.75rem',\r\n  fontWeight: 700,\r\n  textTransform: 'uppercase',\r\n  letterSpacing: '0.5px',\r\n  lineHeight: '1.5rem',\r\n  paddingLeft: theme.spacing(3),\r\n  marginTop: theme.spacing(1)\r\n}));\r\n\r\n// 菜单项类型定义\r\ninterface MenuItem {\r\n  text: string;\r\n  icon: React.ReactNode;\r\n  path: string;\r\n  role?: string | string[];\r\n}\r\n\r\ninterface MenuGroup {\r\n  title: string;\r\n  items: MenuItem[];\r\n}\r\n\r\n// 菜单项分组\r\nconst menuGroups: MenuGroup[] = [\r\n  {\r\n    title: '概览',\r\n    items: [\r\n      { text: '仪表盘', icon: <Dashboard />, path: '/dashboard' },\r\n    ]\r\n  },\r\n  {\r\n    title: '教学管理',\r\n    items: [\r\n      { text: '学生管理', icon: <People />, path: '/student-management' },\r\n      { text: '班级管理', icon: <School />, path: '/class-management' },\r\n      { text: '学科管理', icon: <MenuBook />, path: '/subject-management' },\r\n    ]\r\n  },\r\n  {\r\n    title: '考勤成绩',\r\n    items: [\r\n      { text: '考试管理', icon: <EventNote />, path: '/exam-management' },\r\n      { text: '成绩管理', icon: <Assessment />, path: '/score-management' },\r\n      { text: '成绩统计', icon: <BarChart />, path: '/score-statistics' },\r\n      { text: '请假管理', icon: <EventBusy />, path: '/leave-management' },\r\n      { text: '请假统计', icon: <BarChart />, path: '/leave-statistics' },\r\n      { text: '奖励表彰', icon: <EmojiEvents />, path: '/reward-management' },\r\n    ]\r\n  },\r\n  {\r\n    title: '系统设置',\r\n    items: [\r\n      { text: '用户管理', icon: <AdminPanelSettings />, path: '/user-management', role: ['ROLE_ADMIN', 'ROLE_HEADTEACHER'] },\r\n    ]\r\n  }\r\n];\r\n\r\n// 主布局组件\r\nconst MainLayout: React.FC = () => {\r\n  const theme = useTheme();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\r\n  const { user, logout } = useAuth();\r\n  \r\n  const [open, setOpen] = useState(!isMobile);\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n  \r\n  // 检查用户是否具有特定角色\r\n  const hasRole = (role?: string | string[]) => {\r\n    if (!role || !user) return true;\r\n    \r\n    // 如果role是数组，检查用户是否拥有其中任一角色\r\n    if (Array.isArray(role)) {\r\n      return role.includes(user.role);\r\n    }\r\n    \r\n    // 如果role是字符串，直接比较\r\n    return user.role === role;\r\n  };\r\n  \r\n  // 处理侧边栏开关\r\n  const handleDrawerToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n  \r\n  // 处理用户菜单开关\r\n  const handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  \r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  \r\n  // 处理菜单项点击\r\n  const handleMenuItemClick = (path: string) => {\r\n    navigate(path);\r\n    if (isMobile) {\r\n      setOpen(false);\r\n    }\r\n  };\r\n  \r\n  // 处理退出登录\r\n  const handleLogout = async () => {\r\n    console.log('调用退出登录功能');\r\n    \r\n    try {\r\n      // 使用AuthContext的logout函数\r\n      await logout();\r\n      \r\n      // 关闭菜单\r\n      handleCloseMenu();\r\n      \r\n      // 使用navigate导航到登录页\r\n      console.log('导航到登录页');\r\n      navigate('/login', { replace: true });\r\n    } catch (error) {\r\n      console.error('退出登录失败:', error);\r\n    }\r\n  };\r\n  \r\n  // 处理个人资料\r\n  const handleProfile = () => {\r\n    navigate('/profile');\r\n    handleCloseMenu();\r\n  };\r\n  \r\n  // 获取用户头像\r\n  const getUserAvatar = () => {\r\n    // 如果用户有自定义头像，可以在这里返回\r\n    // 根据性别返回默认头像\r\n    return getDefaultAvatar(user?.gender);\r\n  };\r\n  \r\n  return (\r\n    <Box sx={{ display: 'flex' }}>\r\n      {/* 顶部导航栏 */}\r\n      <AppBarStyled position=\"fixed\" open={open}>\r\n        <Toolbar sx={{ \r\n          display: 'flex', \r\n          justifyContent: 'space-between',\r\n          height: '64px',\r\n          px: { xs: 2, sm: 3 }\r\n        }}>\r\n          <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              edge=\"start\"\r\n              onClick={handleDrawerToggle}\r\n              sx={{ \r\n                mr: 2,\r\n                backgroundColor: alpha('#fff', 0.1),\r\n                '&:hover': {\r\n                  backgroundColor: alpha('#fff', 0.2),\r\n                }\r\n              }}\r\n            >\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography \r\n              variant=\"h6\" \r\n              noWrap \r\n              component=\"div\" \r\n              sx={{ \r\n                fontWeight: 600,\r\n                letterSpacing: '0.5px',\r\n                textShadow: '0 1px 2px rgba(0,0,0,0.2)',\r\n                display: 'flex',\r\n                alignItems: 'center'\r\n              }}\r\n            >\r\n              <School \r\n                sx={{ \r\n                  mr: 1, \r\n                  fontSize: '1.8rem',\r\n                  display: { xs: 'none', sm: 'block' }\r\n                }} \r\n              />\r\n              班主任管理系统\r\n            </Typography>\r\n          </Box>\r\n          \r\n          {/* 用户头像和菜单 */}\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            alignItems: 'center',\r\n            backgroundColor: alpha('#fff', 0.1),\r\n            borderRadius: '30px',\r\n            padding: '4px 16px 4px 8px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n            transition: 'all 0.2s',\r\n            '&:hover': {\r\n              backgroundColor: alpha('#fff', 0.15),\r\n              boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\r\n            }\r\n          }}>\r\n            {/* 显示用户姓名 */}\r\n            <Typography \r\n              variant=\"body1\" \r\n              sx={{ \r\n                mr: 2, \r\n                fontWeight: 500,\r\n                display: { xs: 'none', sm: 'block' }\r\n              }}\r\n            >\r\n              {user?.name || ''}\r\n            </Typography>\r\n            <Tooltip title=\"账号设置\">\r\n              <IconButton \r\n                onClick={handleMenu} \r\n                sx={{ \r\n                  p: 0.5,\r\n                  border: `2px solid ${alpha('#fff', 0.3)}`,\r\n                  transition: 'all 0.2s',\r\n                  '&:hover': {\r\n                    border: `2px solid ${alpha('#fff', 0.5)}`,\r\n                  }\r\n                }}\r\n              >\r\n                <Avatar \r\n                  alt={user?.name || '用户'} \r\n                  src={getUserAvatar()} \r\n                  sx={{ width: 36, height: 36 }}\r\n                />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              anchorOrigin={{\r\n                vertical: 'bottom',\r\n                horizontal: 'right',\r\n              }}\r\n              keepMounted\r\n              transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              open={Boolean(anchorEl)}\r\n              onClose={handleCloseMenu}\r\n              PaperProps={{\r\n                sx: {\r\n                  mt: 1.5,\r\n                  boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\r\n                  borderRadius: '12px',\r\n                  minWidth: '180px',\r\n                  '& .MuiMenuItem-root': {\r\n                    px: 2,\r\n                    py: 1.5,\r\n                    borderRadius: '8px',\r\n                    mx: 1,\r\n                    my: 0.5,\r\n                    '&:hover': {\r\n                      backgroundColor: alpha(theme.palette.primary.main, 0.08),\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n            >\r\n              <MenuItem onClick={handleProfile}>\r\n                <ListItemIcon>\r\n                  <Person fontSize=\"small\" color=\"primary\" />\r\n                </ListItemIcon>\r\n                <Typography variant=\"body2\" fontWeight={500}>个人资料</Typography>\r\n              </MenuItem>\r\n              <Divider sx={{ my: 1, mx: 2, opacity: 0.6 }} />\r\n              <MenuItem onClick={handleLogout}>\r\n                <ListItemIcon>\r\n                  <Logout fontSize=\"small\" color=\"error\" />\r\n                </ListItemIcon>\r\n                <Typography variant=\"body2\" fontWeight={500} color=\"error.main\">退出登录</Typography>\r\n              </MenuItem>\r\n            </Menu>\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBarStyled>\r\n      \r\n      {/* 侧边栏 */}\r\n      <Drawer\r\n        sx={{\r\n          width: drawerWidth,\r\n          flexShrink: 0,\r\n          '& .MuiDrawer-paper': {\r\n            width: drawerWidth,\r\n            boxSizing: 'border-box',\r\n            backgroundImage: `linear-gradient(to bottom, ${alpha(theme.palette.background.default, 0.8)}, ${theme.palette.background.default})`,\r\n          },\r\n        }}\r\n        variant={isMobile ? 'temporary' : 'persistent'}\r\n        anchor=\"left\"\r\n        open={open}\r\n        onClose={isMobile ? handleDrawerToggle : undefined}\r\n      >\r\n        <LogoContainer>\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            alignItems: 'center',\r\n            background: `linear-gradient(135deg, ${alpha(theme.palette.primary.light, 0.1)}, transparent)`,\r\n            padding: '8px 12px',\r\n            borderRadius: '12px',\r\n          }}>\r\n            <img \r\n              src=\"https://img.icons8.com/color/48/000000/school.png\" \r\n              alt=\"Logo\" \r\n              style={{ \r\n                width: '36px', \r\n                height: '36px', \r\n                marginRight: '12px',\r\n                filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'\r\n              }} \r\n            />\r\n            <Box>\r\n              <Typography \r\n                variant=\"h6\" \r\n                noWrap \r\n                component=\"div\" \r\n                sx={{ \r\n                  fontWeight: 'bold', \r\n                  color: theme.palette.primary.main,\r\n                  textShadow: `0 1px 2px ${alpha('#000', 0.1)}`,\r\n                  letterSpacing: '0.5px'\r\n                }}\r\n              >\r\n                班主任系统\r\n              </Typography>\r\n              <Typography \r\n                variant=\"caption\" \r\n                sx={{ \r\n                  display: 'block',\r\n                  color: theme.palette.text.secondary,\r\n                  marginTop: '-4px',\r\n                  letterSpacing: '1px'\r\n                }}\r\n              >\r\n                CLASS TEACHER\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </LogoContainer>\r\n        \r\n        <Box sx={{ overflow: 'auto', py: 1 }}>\r\n          {menuGroups.map((group, index) => {\r\n            // 过滤出当前用户有权限查看的菜单项\r\n            const visibleItems = group.items.filter(item => !item.role || hasRole(item.role));\r\n            \r\n            // 如果该分组没有可见项，则不显示该分组\r\n            if (visibleItems.length === 0) return null;\r\n            \r\n            return (\r\n              <React.Fragment key={group.title}>\r\n                {index > 0 && <Divider sx={{ my: 1, mx: 2, opacity: 0.6 }} />}\r\n                <StyledListSubheader>{group.title}</StyledListSubheader>\r\n                <List disablePadding>\r\n                  {visibleItems.map((item) => (\r\n                    <ListItem key={item.text} disablePadding>\r\n                      <StyledListItemButton \r\n                        selected={location.pathname === item.path}\r\n                        onClick={() => handleMenuItemClick(item.path)}\r\n                      >\r\n                        <ListItemIcon \r\n                          sx={{ \r\n                            minWidth: '40px',\r\n                            color: location.pathname === item.path ? 'primary.main' : 'text.secondary'\r\n                          }}\r\n                        >\r\n                          {item.icon}\r\n                        </ListItemIcon>\r\n                        <ListItemText \r\n                          primary={item.text} \r\n                          primaryTypographyProps={{\r\n                            fontSize: '0.95rem',\r\n                            fontWeight: location.pathname === item.path ? 600 : 400\r\n                          }}\r\n                        />\r\n                      </StyledListItemButton>\r\n                    </ListItem>\r\n                  ))}\r\n                </List>\r\n              </React.Fragment>\r\n            );\r\n          })}\r\n        </Box>\r\n      </Drawer>\r\n      \r\n      {/* 主内容区域 */}\r\n      <Main open={open}>\r\n        <DrawerHeader />\r\n        <Outlet />\r\n      </Main>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default MainLayout; "],"names":["DEFAULT_AVATAR","drawerWidth","Main","styled","shouldForwardProp","prop","_ref","theme","open","_objectSpread","flexGrow","padding","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","concat","easeOut","enteringScreen","AppBarStyled","AppBar","_ref2","backgroundImage","palette","primary","main","dark","boxShadow","alpha","width","DrawerHeader","_ref3","display","alignItems","mixins","toolbar","justifyContent","LogoContainer","Box","_ref4","borderBottom","backgroundColor","position","content","bottom","left","right","height","background","StyledListItemButton","ListItemButton","_ref5","borderRadius","margin","transform","top","StyledListSubheader","ListSubheader","_ref6","color","text","secondary","fontSize","fontWeight","textTransform","letterSpacing","lineHeight","paddingLeft","marginTop","menuGroups","title","items","icon","_jsx","Dashboard","path","People","School","MenuBook","EventNote","Assessment","BarChart","EventBusy","EmojiEvents","AdminPanelSettings","role","MainLayout","useTheme","navigate","useNavigate","location","useLocation","isMobile","useMediaQuery","breakpoints","down","user","logout","useAuth","setOpen","useState","anchorEl","setAnchorEl","handleDrawerToggle","handleCloseMenu","_jsxs","sx","children","Toolbar","px","xs","sm","IconButton","edge","onClick","mr","MenuIcon","Typography","variant","noWrap","component","textShadow","name","Tooltip","event","currentTarget","p","border","Avatar","alt","src","gender","normalizedGender","toLowerCase","getDefaultAvatar","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","Boolean","onClose","PaperProps","mt","minWidth","py","mx","my","MenuItem","handleProfile","ListItemIcon","Person","Divider","opacity","async","console","log","replace","error","Logout","Drawer","flexShrink","boxSizing","default","anchor","undefined","light","style","marginRight","filter","overflow","map","group","index","visibleItems","item","Array","isArray","includes","length","React","List","disablePadding","ListItem","selected","pathname","handleMenuItemClick","ListItemText","primaryTypographyProps","Outlet"],"sourceRoot":""}