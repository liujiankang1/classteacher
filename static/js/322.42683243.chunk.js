"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[322],{23665:(e,t,a)=>{a.d(t,{Eh:()=>d,Ez:()=>l,I9:()=>i,Zb:()=>o,_p:()=>c,j6:()=>r,uJ:()=>n});const s=a(79722).A.create({baseURL:"http://124.70.74.246:8081",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const n=async()=>{try{console.log("\u5f00\u59cb\u83b7\u53d6\u6240\u6709\u73ed\u7ea7\u6570\u636e");const e=localStorage.getItem("token");console.log("\u5f53\u524d\u8ba4\u8bc1\u4ee4\u724c:",e?"\u6709\u6548":"\u65e0\u6548\u6216\u4e0d\u5b58\u5728"),console.log("\u76f4\u63a5\u8bf7\u6c42\u540e\u7aef http://124.70.74.246:8081/api/classes");const t=await s.get("/api/classes");return console.log("\u83b7\u53d6\u73ed\u7ea7\u6210\u529f:",t),t}catch(e){throw console.error("\u83b7\u53d6\u6240\u6709\u73ed\u7ea7\u5931\u8d25:",e),console.error("\u9519\u8bef\u8be6\u60c5:",e.response?{"\u72b6\u6001\u7801":e.response.status,"\u6570\u636e":e.response.data,"\u8bf7\u6c42\u5934":e.response.headers}:"\u65e0\u54cd\u5e94\u8be6\u60c5"),!e.response||401!==e.response.status&&403!==e.response.status||console.error("\u8ba4\u8bc1\u5931\u8d25\uff0c\u8bf7\u786e\u4fdd\u5df2\u767b\u5f55\u5e76\u6709\u6743\u9650\u8bbf\u95ee\u73ed\u7ea7\u4fe1\u606f"),e}},o=async e=>{try{return await s.get("/api/classes/search?query=".concat(e))}catch(t){throw console.error('\u641c\u7d22\u73ed\u7ea7"'.concat(e,'"\u5931\u8d25:'),t),t}},r=async e=>{try{return await s.post("/api/classes",e)}catch(t){throw console.error("\u521b\u5efa\u73ed\u7ea7\u5931\u8d25:",t),t}},l=async(e,t)=>{try{return await s.put("/api/classes/".concat(e),t)}catch(a){throw console.error("\u66f4\u65b0\u73ed\u7ea7ID=".concat(e,"\u5931\u8d25:"),a),a}},c=async e=>{try{return await s.delete("/api/classes/".concat(e))}catch(t){throw console.error("\u5220\u9664\u73ed\u7ea7ID=".concat(e,"\u5931\u8d25:"),t),t}},i=async(e,t)=>{try{return await s.put("/api/classes/".concat(e,"/assign/").concat(t))}catch(a){throw console.error("\u4e3a\u73ed\u7ea7ID=".concat(e,"\u5206\u914d\u73ed\u4e3b\u4efbID=").concat(t,"\u5931\u8d25:"),a),a}},d=async e=>{try{return console.log("\u5f00\u59cb\u83b7\u53d6\u73ed\u7ea7ID=".concat(e,"\u7684\u5b66\u751f\u4e0b\u62c9\u9009\u9879")),await s.get("/api/students/class/".concat(e,"/select"))}catch(t){throw console.error("\u83b7\u53d6\u73ed\u7ea7ID=".concat(e,"\u7684\u5b66\u751f\u4e0b\u62c9\u9009\u9879\u5931\u8d25:"),t),t}}},37305:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(99992),n=a(70579);const o=(0,s.A)((0,n.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},47471:(e,t,a)=>{a.d(t,{A:()=>I});var s=a(80045),n=a(89379),o=a(65043),r=a(58387),l=a(31807),c=a(29651),i=a(42466),d=a(58128),u=a(51612),h=a(28301),p=a(59066),g=a(76606),x=a(14418),m=a(38348),w=a(44171),A=a(86057),y=a(81977),v=a(79857),b=a(86061);function f(e){return(0,b.Ay)("MuiMenuItem",e)}const j=(0,v.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var D=a(70579);const C=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],S=(0,d.Ay)(g.A,{shouldForwardProp:e=>(0,i.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,u.A)((e=>{let{theme:t}=e;return(0,n.A)((0,n.A)({},t.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(j.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(j.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(j.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(j.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(j.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(w.A.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(w.A.inset)]:{marginLeft:52},["& .".concat(y.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(y.A.inset)]:{paddingLeft:36},["& .".concat(A.A.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:(0,n.A)((0,n.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2),{},{["& .".concat(A.A.root," svg")]:{fontSize:"1.25rem"}})}]})}))),I=o.forwardRef((function(e,t){const a=(0,h.b)({props:e,name:"MuiMenuItem"}),{autoFocus:c=!1,component:i="li",dense:d=!1,divider:u=!1,disableGutters:g=!1,focusVisibleClassName:w,role:A="menuitem",tabIndex:y,className:v}=a,b=(0,s.A)(a,C),j=o.useContext(p.A),I=o.useMemo((()=>({dense:d||j.dense||!1,disableGutters:g})),[j.dense,d,g]),F=o.useRef(null);(0,x.A)((()=>{c&&F.current&&F.current.focus()}),[c]);const k=(0,n.A)((0,n.A)({},a),{},{dense:I.dense,divider:u,disableGutters:g}),M=(e=>{const{disabled:t,dense:a,divider:s,disableGutters:o,selected:r,classes:c}=e,i={root:["root",a&&"dense",t&&"disabled",!o&&"gutters",s&&"divider",r&&"selected"]},d=(0,l.A)(i,f,c);return(0,n.A)((0,n.A)({},c),d)})(a),R=(0,m.A)(F,t);let O;return a.disabled||(O=void 0!==y?y:-1),(0,D.jsx)(p.A.Provider,{value:I,children:(0,D.jsx)(S,(0,n.A)((0,n.A)({ref:R,role:A,tabIndex:O,component:i,focusVisibleClassName:(0,r.A)(M.focusVisible,w),className:(0,r.A)(M.root,v)},b),{},{ownerState:k,classes:M}))})}))},61713:(e,t,a)=>{a.d(t,{Yq:()=>n,dX:()=>l,r6:()=>s,vM:()=>r,xw:()=>o});const s=e=>{if(!e)return"";try{if(Array.isArray(e)){const[t,a,s,n=0,o=0]=e;return"".concat(t,"-").concat(String(a).padStart(2,"0"),"-").concat(String(s).padStart(2,"0")," ").concat(String(n).padStart(2,"0"),":").concat(String(o).padStart(2,"0"))}const t=new Date(e);if(isNaN(t.getTime()))return String(e);const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(n," ").concat(o,":").concat(r)}catch(t){return console.error("\u65e5\u671f\u683c\u5f0f\u5316\u9519\u8bef:",t,e),String(e)}},n=e=>{if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(n)},o=()=>{const e=new Date,t=e.getDay()||7,a=new Date(e);a.setDate(e.getDate()-t+1),a.setHours(0,0,0,0);const s=new Date(e);return s.setDate(e.getDate()+(7-t)),s.setHours(23,59,59,999),[a,s]},r=()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);t.setHours(0,0,0,0);const a=new Date(e.getFullYear(),e.getMonth()+1,0);return a.setHours(23,59,59,999),[t,a]},l=()=>{const e=new Date;let t,a;return e.getMonth()<6?(t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),5,30)):(t=new Date(e.getFullYear(),6,1),a=new Date(e.getFullYear(),11,31)),t.setHours(0,0,0,0),a.setHours(23,59,59,999),[t,a]}},69302:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(99992),n=a(70579);const o=(0,s.A)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},81977:(e,t,a)=>{a.d(t,{A:()=>r,b:()=>o});var s=a(79857),n=a(86061);function o(e){return(0,n.Ay)("MuiListItemText",e)}const r=(0,s.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},86057:(e,t,a)=>{a.d(t,{A:()=>r,f:()=>o});var s=a(79857),n=a(86061);function o(e){return(0,n.Ay)("MuiListItemIcon",e)}const r=(0,s.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},88322:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(89379),n=a(65043),o=a(38517),r=a(81911),l=a(55895),c=a(78776),i=a(53969),d=a(70298),u=a(10256),h=a(3353),p=a(67203),g=a(47471),x=a(22947),m=a(24343),w=a(85877),A=a(12097),y=a(80172),v=a(70916),b=a(91449),f=a(94799),j=a(14333),D=a(12843),C=a(28259),S=a(87443),I=a(10756),F=a(86172),k=a(81341),M=a(34375),R=a(81133),O=a(72179),L=a(24793),T=a(99992),N=a(70579);const U=(0,T.A)((0,N.jsx)("path",{d:"M12 22c4.97 0 9-4.03 9-9-4.97 0-9 4.03-9 9M5.6 10.25c0 1.38 1.12 2.5 2.5 2.5.53 0 1.01-.16 1.42-.44l-.02.19c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5l-.02-.19c.4.28.89.44 1.42.44 1.38 0 2.5-1.12 2.5-2.5 0-1-.59-1.85-1.43-2.25.84-.4 1.43-1.25 1.43-2.25 0-1.38-1.12-2.5-2.5-2.5-.53 0-1.01.16-1.42.44l.02-.19C14.5 2.12 13.38 1 12 1S9.5 2.12 9.5 3.5l.02.19c-.4-.28-.89-.44-1.42-.44-1.38 0-2.5 1.12-2.5 2.5 0 1 .59 1.85 1.43 2.25-.84.4-1.43 1.25-1.43 2.25M12 5.5c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8s1.12-2.5 2.5-2.5M3 13c0 4.97 4.03 9 9 9 0-4.97-4.03-9-9-9"}),"LocalFlorist");var Y=a(37305),E=a(69302),z=a(75480),H=a(60446),W=a.n(H),q=a(75821),P=a(23665);const B=a(79722).A.create({baseURL:"http://124.70.74.246:8081",timeout:3e4,headers:{"Content-Type":"application/json"}});B.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const V="/api/rewards",G="/api/statistics/rewards",X=async e=>{const{classId:t,period:a,startDate:s,endDate:n}=e;let o="".concat(G);const r=[];return t&&r.push("classId=".concat(t)),a&&r.push("period=".concat(a)),s&&n&&(r.push("startDate=".concat(s)),r.push("endDate=".concat(n))),r.length>0&&(o+="?".concat(r.join("&"))),console.log("\u8bf7\u6c42\u7edf\u8ba1\u6570\u636eURL:",o),console.log("\u8bf7\u6c42\u53c2\u6570\u8be6\u60c5:",{classId:t,period:a,startDate:s,endDate:n}),B.get(o)};var K=a(61713);const _=()=>{const[e,t]=(0,n.useState)(!1),[a,T]=(0,n.useState)(!1),[H,_]=(0,n.useState)(!1),[J,$]=(0,n.useState)(!1),[Z,Q]=(0,n.useState)(""),[ee,te]=(0,n.useState)(""),[ae,se]=(0,n.useState)(0),[ne,oe]=(0,n.useState)([]),[re,le]=(0,n.useState)({totalFlowers:0,todayFlowers:0,averageFlowers:0,maxFlowers:0}),[ce,ie]=(0,n.useState)("WEEK"),[de,ue]=(0,n.useState)([]),[he,pe]=(0,n.useState)([]),[ge,xe]=(0,n.useState)(""),[me,we]=(0,n.useState)(1),[Ae,ye]=(0,n.useState)("\u8bfe\u5802\u8868\u73b0\u4f18\u79c0"),[ve,be]=(0,n.useState)(new Date),[fe,je]=(0,n.useState)(!1),[De,Ce]=(0,n.useState)(!1),[Se,Ie]=(0,n.useState)({}),[Fe,ke]=(0,n.useState)("WEEK"),[Me,Re]=(0,n.useState)(""),[Oe,Le]=(0,n.useState)({open:!1,message:"",severity:"success"}),Te=(0,n.useRef)(!1),Ne=(0,n.useRef)(null),Ue=(0,n.useRef)(null),Ye=(0,n.useRef)(null),[Ee,ze]=(0,n.useState)([null,null]),[He,We]=(0,n.useState)(!1),[qe,Pe]=(0,n.useState)(!1),Be=function(e){Le({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})},Ve=()=>{Le((e=>(0,s.A)((0,s.A)({},e),{},{open:!1})))},Ge=(0,n.useCallback)((e=>{if(!Ue.current)return void console.warn("\u56fe\u8868\u5bb9\u5668\u5f15\u7528\u4e3a\u7a7a\uff0c\u65e0\u6cd5\u6e32\u67d3\u56fe\u8868");if(!document.body.contains(Ue.current))return void console.warn("\u56fe\u8868\u5bb9\u5668\u4e0d\u5728DOM\u4e2d\uff0c\u53ef\u80fd\u7ec4\u4ef6\u5df2\u5378\u8f7d\uff0c\u53d6\u6d88\u6e32\u67d3");const t=Ue.current.clientWidth,a=Ue.current.clientHeight;if(0!==t&&0!==a)try{if(console.log("\u5f00\u59cb\u6e32\u67d3\u56fe\u8868\uff0c\u6570\u636e:",e),Ye.current){console.log("\u9500\u6bc1\u65e7\u56fe\u8868\u5b9e\u4f8b");try{Ye.current.dispose()}catch(s){console.error("\u9500\u6bc1\u65e7\u56fe\u8868\u5b9e\u4f8b\u5931\u8d25:",s)}finally{Ye.current=null}}console.log("\u56fe\u8868\u5bb9\u5668\u5c3a\u5bf8:",t,a);try{const t=z.Ts(Ue.current);Ye.current=t;const a=Object.entries(e||{}).map((e=>{let[t,a]=e;return{name:t,value:a}}));console.log("\u8f6c\u6362\u540e\u7684\u56fe\u8868\u6570\u636e:",a);const s={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"\u5c0f\u7ea2\u82b1\u53d1\u653e\u539f\u56e0",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:a.length>0?a:[{value:0,name:"\u6682\u65e0\u6570\u636e"}]}]};console.log("\u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e:",s),t.setOption(s),console.log("\u56fe\u8868\u6e32\u67d3\u5b8c\u6210")}catch(n){if(console.error("\u521b\u5efa\u6216\u521d\u59cb\u5316\u56fe\u8868\u5931\u8d25:",n),Ye.current){try{Ye.current.dispose()}catch(o){}Ye.current=null}}}catch(r){if(console.error("\u6e32\u67d3\u56fe\u8868\u8fc7\u7a0b\u4e2d\u51fa\u9519:",r),Ye.current){try{Ye.current.dispose()}catch(o){}Ye.current=null}}else console.warn("\u56fe\u8868\u5bb9\u5668\u5c3a\u5bf8\u4e3a0\uff0c\u65e0\u6cd5\u6b63\u5e38\u6e32\u67d3\u56fe\u8868:",t,a)}),[]),Xe=(0,n.useCallback)((async e=>{if(!e||H)return console.warn("\u65e0\u6548\u7684\u73ed\u7ea7ID\u6216\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u65e0\u6cd5\u83b7\u53d6\u5b66\u751f\u5217\u8868"),void $(!1);console.log("\u5f00\u59cb\u83b7\u53d6\u73ed\u7ea7ID=".concat(e,"\u7684\u5b66\u751f\u5217\u8868"));try{_(!0);const t=await P.Eh(e);if(console.log("\u73ed\u7ea7\u5b66\u751f\u4e0b\u62c9\u9009\u9879\u539f\u59cb\u54cd\u5e94:",t),!t||!t.data)throw new Error("\u83b7\u53d6\u5b66\u751f\u5217\u8868\u54cd\u5e94\u65e0\u6548");const a=Array.isArray(t.data)?t.data:[];if(console.log("\u89e3\u6790\u540e\u7684\u5b66\u751f\u5217\u8868\u6570\u636e:",a),0===a.length)return console.warn("\u73ed\u7ea7\u5b66\u751f\u5217\u8868\u4e3a\u7a7a"),pe([]),void $(!1);const s=a.filter((e=>Boolean(e.id&&e.name&&e.studentNumber))).map((e=>({label:"".concat(e.name," (").concat(e.studentNumber,")"),value:e.id.toString()})));console.log("\u6700\u7ec8\u751f\u6210\u7684\u5b66\u751f\u9009\u9879\u5217\u8868:",s),s.length>0?(pe(s),$(!0),console.log("studentOptions \u5df2\u66f4\u65b0\uff0c\u5f53\u524d\u503c:",s)):(console.warn("\u6ca1\u6709\u751f\u6210\u6709\u6548\u7684\u5b66\u751f\u9009\u9879"),pe([]),$(!1))}catch(t){console.error("\u83b7\u53d6\u73ed\u7ea7\u5b66\u751f\u5217\u8868\u51fa\u9519:",t),Be("\u83b7\u53d6\u5b66\u751f\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","error"),pe([]),$(!1)}finally{_(!1)}}),[H]),Ke=(0,n.useCallback)((async(e,a)=>{if(e)if("CUSTOM"!==a||Ee[0]&&Ee[1]){t(!0);try{const t=a||Fe||ce;let s,n;switch(console.log("\u5f00\u59cb\u83b7\u53d6\u73ed\u7ea7ID=".concat(e,"\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u65f6\u95f4\u6bb5=").concat(t)),t){case"WEEK":default:[s,n]=(0,K.xw)();break;case"MONTH":[s,n]=(0,K.vM)();break;case"CUSTOM":Ee[0]&&Ee[1]?[s,n]=[Ee[0],Ee[1]]:[s,n]=(0,K.xw)()}const o=(0,K.Yq)(s),r={classId:e,period:t,startDate:o,endDate:(0,K.Yq)(n)};console.log("\u7edf\u8ba1\u6570\u636e\u8bf7\u6c42\u53c2\u6570:",r);const l=await X(r);console.log("\u73ed\u7ea7\u7edf\u8ba1\u6570\u636e\u54cd\u5e94:",l);let c={};if(l&&l.data&&(l.data.data?c=l.data.data:void 0!==l.data.success&&(c=l.data)),c){if(console.log("\u89e3\u6790\u540e\u7684\u7edf\u8ba1\u6570\u636e:",c),se(c.studentCount||0),le({totalFlowers:c.totalFlowers||0,todayFlowers:c.todayFlowers||0,averageFlowers:"number"===typeof c.averageFlowers?c.averageFlowers:0,maxFlowers:c.maxFlowers||0}),c.studentRankings&&Array.isArray(c.studentRankings)){const e=c.studentRankings.map(((e,t)=>({id:t+1,studentId:e.studentId||e.id,name:e.studentName||e.name,className:e.className||Z,flowerCount:e.flowerCount||0,lastRewardDate:e.lastRewardDate||"\u672a\u77e5"})));ue(e)}c.reasonDistribution?(console.log("\u83b7\u53d6\u5230\u539f\u56e0\u5206\u5e03\u6570\u636e\uff0c\u51c6\u5907\u6e32\u67d3\u56fe\u8868:",c.reasonDistribution),Ge(c.reasonDistribution)):(console.warn("\u672a\u83b7\u53d6\u5230\u539f\u56e0\u5206\u5e03\u6570\u636e"),Ge({}))}else console.warn("\u672a\u83b7\u53d6\u5230\u6709\u6548\u7684\u7edf\u8ba1\u6570\u636e"),Be("\u672a\u83b7\u53d6\u5230\u73ed\u7ea7\u7edf\u8ba1\u6570\u636e","warning"),se(0),le({totalFlowers:0,todayFlowers:0,averageFlowers:0,maxFlowers:0}),ue([]),Ge({})}catch(s){console.error("\u83b7\u53d6\u73ed\u7ea7\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",s),Be("\u83b7\u53d6\u73ed\u7ea7\u7edf\u8ba1\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","error"),se(0),le({totalFlowers:0,todayFlowers:0,averageFlowers:0,maxFlowers:0}),ue([]),Ge({})}finally{t(!1)}}else Be("\u8bf7\u5148\u9009\u62e9\u81ea\u5b9a\u4e49\u65e5\u671f\u8303\u56f4","warning");else console.warn("\u65e0\u6548\u7684\u73ed\u7ea7ID\uff0c\u65e0\u6cd5\u83b7\u53d6\u7edf\u8ba1\u6570\u636e")}),[Ge,Z,Ee,Be,Fe,ce]),_e=(0,n.useCallback)((async()=>{if(a||Te.current)console.log("\u73ed\u7ea7\u5217\u8868\u6b63\u5728\u52a0\u8f7d\u4e2d\u6216\u5df2\u521d\u59cb\u5316\uff0c\u8df3\u8fc7\u91cd\u590d\u8bf7\u6c42");else try{T(!0);const e=await P.uJ();console.log("\u73ed\u7ea7API\u54cd\u5e94:",e);let t=[];if(e&&e.data)if(Array.isArray(e.data))t=e.data;else if(e.data.data&&Array.isArray(e.data.data))t=e.data.data;else if(e.data.content&&Array.isArray(e.data.content))t=e.data.content;else if("object"===typeof e.data){console.log("\u54cd\u5e94\u7ed3\u6784\u4e0d\u662f\u9884\u671f\u7684\u6570\u7ec4\u683c\u5f0f\uff0c\u5c1d\u8bd5\u4ece\u5bf9\u8c61\u4e2d\u63d0\u53d6\u6570\u636e");const a=Object.values(e.data).filter((e=>Array.isArray(e)));a.length>0&&(t=a[0])}if(console.log("\u89e3\u6790\u540e\u7684\u73ed\u7ea7\u6570\u636e:",t),t&&t.length>0){const e=t.map((e=>({label:e.name||e.className||"\u672a\u547d\u540d\u73ed\u7ea7",value:String(e.id)})));if(oe(e),!ee){const e=t[0],a=String(e.id),s=e.name||e.className||"\u672a\u547d\u540d\u73ed\u7ea7";Q(s),te(a),console.log("\u521d\u59cb\u5316\u65f6\u83b7\u53d6\u7b2c\u4e00\u4e2a\u73ed\u7ea7\u7684\u5b66\u751f\u5217\u8868\u548c\u7edf\u8ba1\u6570\u636e"),await Xe(a),await Ke(a)}Te.current=!0}else console.warn("\u672a\u83b7\u53d6\u5230\u73ed\u7ea7\u6570\u636e\u6216\u73ed\u7ea7\u5217\u8868\u4e3a\u7a7a"),Be("\u672a\u627e\u5230\u73ed\u7ea7\u6570\u636e\uff0c\u8bf7\u5148\u521b\u5efa\u73ed\u7ea7","warning")}catch(e){console.error("\u83b7\u53d6\u73ed\u7ea7\u5217\u8868\u5931\u8d25:",e),Be("\u83b7\u53d6\u73ed\u7ea7\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u6216\u670d\u52a1\u5668\u72b6\u6001","error")}finally{T(!1)}}),[ee,Ke,Xe,a]),Je=(0,n.useCallback)((async e=>{if(a||H)return void console.log("\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u5ffd\u7565\u73ed\u7ea7\u5207\u6362\u8bf7\u6c42");if(e===ee)return void console.log("\u9009\u62e9\u7684\u662f\u5f53\u524d\u73ed\u7ea7\uff0c\u65e0\u9700\u5207\u6362");console.log("\u5f00\u59cb\u5207\u6362\u73ed\u7ea7:",e);const t=ne.find((t=>t.value===e));if(t)try{T(!0),_(!0),$(!1),xe(""),pe([]),Q(t.label),te(e),console.log("\u5f00\u59cb\u83b7\u53d6\u65b0\u73ed\u7ea7\u7684\u5b66\u751f\u5217\u8868"),await Xe(e),console.log("\u5f00\u59cb\u83b7\u53d6\u65b0\u73ed\u7ea7\u7684\u7edf\u8ba1\u6570\u636e"),await Ke(e)}catch(s){console.error("\u5207\u6362\u73ed\u7ea7\u65f6\u53d1\u751f\u9519\u8bef:",s),Be("\u5207\u6362\u73ed\u7ea7\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","error")}finally{T(!1),_(!1)}}),[a,H,ee,ne,Xe,Ke]);(0,n.useEffect)((()=>(console.log("\u7ec4\u4ef6\u6302\u8f7d - \u8bbe\u7f6e\u5168\u5c40\u6e05\u7406"),()=>{if(console.log("\u7ec4\u4ef6\u5378\u8f7d - \u6267\u884c\u5168\u5c40\u6e05\u7406"),Ye.current)try{console.log("\u7ec4\u4ef6\u5378\u8f7d - \u6e05\u7406\u56fe\u8868\u5b9e\u4f8b"),Ye.current.dispose(),Ye.current=null}catch(e){console.error("\u56fe\u8868\u5b9e\u4f8b\u6e05\u7406\u5931\u8d25:",e)}[].forEach((e=>clearTimeout(e)))})),[]),(0,n.useEffect)((()=>{(async()=>{0!==ne.length||Te.current||(console.log("\u9996\u6b21\u52a0\u8f7d\u73ed\u7ea7\u5217\u8868"),await _e())})();const e=()=>{Ye.current&&Ue.current&&null!==Ue.current.offsetParent&&Ue.current.clientWidth>0&&Ue.current.clientHeight>0&&(console.log("\u7a97\u53e3\u5927\u5c0f\u53d8\u5316\uff0c\u91cd\u65b0\u8c03\u6574\u56fe\u8868\u5927\u5c0f"),Ye.current.resize())};window.addEventListener("resize",e);const t=setTimeout((()=>{Ye.current&&(console.log("\u5ef6\u65f6\u8c03\u6574\u56fe\u8868\u5927\u5c0f"),e())}),500);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}}),[_e,ne.length]);(0,n.useCallback)((async()=>{if(ee){t(!0);try{let e,a;switch(ce){case"WEEK":default:[e,a]=(0,K.xw)();break;case"MONTH":[e,a]=(0,K.vM)();break;case"SEMESTER":[e,a]=(0,K.dX)()}const s=await(async e=>{const{classId:t,period:a,startDate:s,endDate:n,page:o=0,size:r=10}=e;let l="".concat(G,"/students/ranking");const c=[];return t&&c.push("classId=".concat(t)),a&&c.push("period=".concat(a)),s&&n&&(c.push("startDate=".concat(s)),c.push("endDate=".concat(n))),void 0!==o&&c.push("page=".concat(o)),void 0!==r&&c.push("size=".concat(r)),c.length>0&&(l+="?".concat(c.join("&"))),console.log("\u8bf7\u6c42\u5b66\u751f\u6392\u540dURL:",l),console.log("\u6392\u540d\u8bf7\u6c42\u53c2\u6570\u8be6\u60c5:",{classId:t,period:a,startDate:s,endDate:n,page:o,size:r}),B.get(l)})({classId:ee,period:ce,startDate:(0,K.Yq)(e),endDate:(0,K.Yq)(a)});if(s&&s.data&&s.data.data&&s.data.data.content){const e=s.data.data.content.map(((e,t)=>({id:t+1,studentId:e.studentId,name:e.studentName,className:e.className,flowerCount:e.flowerCount,lastRewardDate:e.lastRewardDate})));ue(e)}t(!1)}catch(e){console.error("\u83b7\u53d6\u5b66\u751f\u6392\u540d\u6570\u636e\u5931\u8d25:",e),Be("\u83b7\u53d6\u5b66\u751f\u6392\u540d\u6570\u636e\u5931\u8d25","error"),t(!1)}}}),[ee,ce]);const $e=()=>{Ie({})},Ze=async()=>{if((()=>{const e={};return ge||(e.studentId="\u8bf7\u9009\u62e9\u5b66\u751f"),(!me||me<1)&&(e.flowerCount="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u5c0f\u7ea2\u82b1\u6570\u91cf"),Ae||(e.reason="\u8bf7\u9009\u62e9\u53d1\u653e\u539f\u56e0"),ve||(e.rewardDate="\u8bf7\u9009\u62e9\u53d1\u653e\u65e5\u671f"),Ie(e),0===Object.keys(e).length})()){Ce(!0);try{const e={studentId:ge,flowerCount:me,reason:Ae,rewardDate:(0,K.Yq)(ve||new Date),description:Ae,remark:Me},t=await(async e=>B.post(V,e))(e);if(t&&t.data){if(void 0!==t.data.success?t.data.success:t.data.code>=200&&t.data.code<300)Be("\u6210\u529f\u4e3a\u5b66\u751f\u53d1\u653e ".concat(me," \u6735\u5c0f\u7ea2\u82b1")),Ke(ee),xe(""),we(1),ye("\u8bfe\u5802\u8868\u73b0\u4f18\u79c0"),be(new Date),Re(""),je(!1),$e();else{const e=t.data.message||"\u53d1\u653e\u5c0f\u7ea2\u82b1\u5931\u8d25";Be(e,"error")}}else Be("\u53d1\u653e\u5c0f\u7ea2\u82b1\u5931\u8d25","error")}catch(e){console.error("\u53d1\u653e\u5c0f\u7ea2\u82b1\u5931\u8d25:",e);let t="\u53d1\u653e\u5c0f\u7ea2\u82b1\u5931\u8d25";e.response&&e.response.data&&e.response.data.message&&(t=e.response.data.message),Be(t,"error")}finally{Ce(!1)}}},Qe=()=>{var e;je(!1),$e(),null===(e=Ne.current)||void 0===e||e.resetFields()},et=(0,n.useCallback)((async(e,a,s)=>{if(e){t(!0);try{console.log("\u5f00\u59cb\u83b7\u53d6\u73ed\u7ea7ID=".concat(e,"\u7684\u81ea\u5b9a\u4e49\u65e5\u671f\u8303\u56f4\u7edf\u8ba1\u6570\u636e:"),{startDate:(0,K.Yq)(a),endDate:(0,K.Yq)(s)});const t=(0,K.Yq)(a),n={classId:e,period:"CUSTOM",startDate:t,endDate:(0,K.Yq)(s)};console.log("\u81ea\u5b9a\u4e49\u65e5\u671f\u8303\u56f4\u7edf\u8ba1\u6570\u636e\u8bf7\u6c42\u53c2\u6570:",n);const o=await X(n);console.log("\u73ed\u7ea7\u7edf\u8ba1\u6570\u636e\u54cd\u5e94:",o);let r={};if(o&&o.data&&(o.data.data?r=o.data.data:void 0!==o.data.success&&(r=o.data)),r){if(console.log("\u89e3\u6790\u540e\u7684\u7edf\u8ba1\u6570\u636e:",r),se(r.studentCount||0),le({totalFlowers:r.totalFlowers||0,todayFlowers:r.todayFlowers||0,averageFlowers:"number"===typeof r.averageFlowers?r.averageFlowers:0,maxFlowers:r.maxFlowers||0}),r.studentRankings&&Array.isArray(r.studentRankings)){const e=r.studentRankings.map(((e,t)=>({id:t+1,studentId:e.studentId||e.id,name:e.studentName||e.name,className:e.className||Z,flowerCount:e.flowerCount||0,lastRewardDate:e.lastRewardDate||"\u672a\u77e5"})));ue(e)}r.reasonDistribution?Ge(r.reasonDistribution):(console.warn("\u672a\u83b7\u53d6\u5230\u539f\u56e0\u5206\u5e03\u6570\u636e"),Ge({}))}else console.warn("\u672a\u83b7\u53d6\u5230\u6709\u6548\u7684\u7edf\u8ba1\u6570\u636e"),Be("\u672a\u83b7\u53d6\u5230\u73ed\u7ea7\u7edf\u8ba1\u6570\u636e","warning"),se(0),le({totalFlowers:0,todayFlowers:0,averageFlowers:0,maxFlowers:0}),ue([]),Ge({})}catch(n){console.error("\u83b7\u53d6\u81ea\u5b9a\u4e49\u65e5\u671f\u8303\u56f4\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",n),Be("\u83b7\u53d6\u7edf\u8ba1\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","error"),se(0),le({totalFlowers:0,todayFlowers:0,averageFlowers:0,maxFlowers:0}),ue([]),Ge({})}finally{t(!1)}}else console.warn("\u65e0\u6548\u7684\u73ed\u7ea7ID\uff0c\u65e0\u6cd5\u83b7\u53d6\u7edf\u8ba1\u6570\u636e")}),[Ge,Z,Be]);return(0,N.jsxs)(i.A,{sx:{padding:3},children:[(0,N.jsx)(v.A,{open:Oe.open,autoHideDuration:6e3,onClose:Ve,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,N.jsx)(b.A,{onClose:Ve,severity:Oe.severity,sx:{width:"100%"},children:Oe.message})}),e&&(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,N.jsx)(y.A,{})}),(0,N.jsx)(f.A,{sx:{p:2,mb:2},elevation:1,children:(0,N.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)(u.A,{sx:{width:200},children:[(0,N.jsx)(h.A,{id:"class-select-label",children:"\u9009\u62e9\u73ed\u7ea7"}),(0,N.jsx)(p.A,{labelId:"class-select-label",value:ee,onChange:e=>Je(e.target.value),label:"\u9009\u62e9\u73ed\u7ea7",disabled:a,children:ne.map((e=>(0,N.jsx)(g.A,{value:e.value,children:e.label},e.value)))})]}),(0,N.jsxs)(l.A,{children:["\u5f53\u524d\u73ed\u7ea7\uff1a",Z," | \u5b66\u751f\u4eba\u6570\uff1a",ae]})]})}),(0,N.jsxs)(i.A,{sx:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gap:2,mb:2},children:[(0,N.jsx)(i.A,{sx:{gridColumn:{xs:"span 12",sm:"span 6",md:"span 3"}},children:(0,N.jsx)(f.A,{elevation:1,children:(0,N.jsxs)(i.A,{sx:{p:2},children:[(0,N.jsx)(l.A,{variant:"subtitle2",color:"textSecondary",children:"\u672c\u73ed\u7ea7\u5c0f\u7ea2\u82b1\u603b\u6570"}),(0,N.jsx)(l.A,{variant:"h4",sx:{color:"#3f8600",mt:1},children:re.totalFlowers})]})})}),(0,N.jsx)(i.A,{sx:{gridColumn:{xs:"span 12",sm:"span 6",md:"span 3"}},children:(0,N.jsx)(f.A,{elevation:1,children:(0,N.jsxs)(i.A,{sx:{p:2},children:[(0,N.jsx)(l.A,{variant:"subtitle2",color:"textSecondary",children:"\u4eca\u65e5\u53d1\u653e\u5c0f\u7ea2\u82b1\u6570"}),(0,N.jsx)(l.A,{variant:"h4",sx:{color:"#cf1322",mt:1},children:re.todayFlowers})]})})}),(0,N.jsx)(i.A,{sx:{gridColumn:{xs:"span 12",sm:"span 6",md:"span 3"}},children:(0,N.jsx)(f.A,{elevation:1,children:(0,N.jsxs)(i.A,{sx:{p:2},children:[(0,N.jsx)(l.A,{variant:"subtitle2",color:"textSecondary",children:"\u5e73\u5747\u6bcf\u4eba\u5c0f\u7ea2\u82b1\u6570"}),(0,N.jsx)(l.A,{variant:"h4",sx:{color:"#1890ff",mt:1},children:re.averageFlowers.toFixed(1)})]})})}),(0,N.jsx)(i.A,{sx:{gridColumn:{xs:"span 12",sm:"span 6",md:"span 3"}},children:(0,N.jsx)(f.A,{elevation:1,children:(0,N.jsxs)(i.A,{sx:{p:2},children:[(0,N.jsx)(l.A,{variant:"subtitle2",color:"textSecondary",children:"\u6700\u591a\u5c0f\u7ea2\u82b1\u6570(\u5b66\u751f)"}),(0,N.jsx)(l.A,{variant:"h4",sx:{color:"#fa8c16",mt:1},children:re.maxFlowers})]})})})]}),(0,N.jsxs)(f.A,{sx:{p:2,mb:2},elevation:1,children:[(0,N.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,N.jsx)(l.A,{variant:"h6",children:"\u5b66\u751f\u5c0f\u7ea2\u82b1\u6392\u884c\u699c"}),(0,N.jsxs)(i.A,{children:[(0,N.jsx)(A.A,{variant:"contained",color:"primary",onClick:()=>{var e;$e(),null===(e=Ne.current)||void 0===e||e.resetFields(),xe(""),we(1),ye("\u8bfe\u5802\u8868\u73b0\u4f18\u79c0"),be(new Date),Re(""),je(!0)},startIcon:(0,N.jsx)(U,{}),sx:{mr:1},children:"\u53d1\u653e\u5c0f\u7ea2\u82b1"}),(0,N.jsx)(A.A,{variant:"contained",color:"primary",onClick:async()=>{if(ee)if(qe)console.log("\u5bfc\u51fa\u64cd\u4f5c\u6b63\u5728\u8fdb\u884c\u4e2d\uff0c\u5ffd\u7565\u91cd\u590d\u70b9\u51fb");else try{Pe(!0),t(!0);const e={classId:ee,period:Fe};"CUSTOM"===Fe&&Ee[0]&&Ee[1]&&(e.startDate=(0,K.Yq)(Ee[0]),e.endDate=(0,K.Yq)(Ee[1])),console.log("\u5bfc\u51fa\u6570\u636e\u8bf7\u6c42\u53c2\u6570:",e);const a=await(async e=>{const{classId:t,period:a,startDate:s,endDate:n}=e;let o="".concat(G,"/export");const r=[];return t&&r.push("classId=".concat(t)),a&&r.push("period=".concat(a)),s&&n&&(r.push("startDate=".concat(s)),r.push("endDate=".concat(n))),r.length>0&&(o+="?".concat(r.join("&"))),console.log("\u8bf7\u6c42\u5bfc\u51fa\u6570\u636eURL:",o),console.log("\u5bfc\u51fa\u8bf7\u6c42\u53c2\u6570\u8be6\u60c5:",{classId:t,period:a,startDate:s,endDate:n}),B.get(o,{responseType:"blob"})})(e),s=a.data,n=window.URL.createObjectURL(s),o="\u5c0f\u7ea2\u82b1\u7edf\u8ba1\u6570\u636e_".concat(Z,"_").concat(W()().format("YYYYMMDD"),".xlsx");(()=>{try{const a=document.createElement("a");if(a.href=n,a.download=o,a.style.display="none",document&&document.body){document.body.appendChild(a);try{a.click(),setTimeout((()=>{try{document&&document.body&&document.body.contains(a)&&document.body.removeChild(a)}catch(e){console.error("\u79fb\u9664\u4e0b\u8f7d\u94fe\u63a5\u5143\u7d20\u5931\u8d25:",e)}try{window.URL.revokeObjectURL(n)}catch(t){console.error("\u91ca\u653eBlob URL\u5931\u8d25:",t)}}),300)}catch(e){console.error("\u4e0b\u8f7d\u70b9\u51fb\u64cd\u4f5c\u5931\u8d25:",e);try{document&&document.body&&document.body.contains(a)&&document.body.removeChild(a)}catch(t){console.error("\u79fb\u9664\u4e0b\u8f7d\u94fe\u63a5\u5143\u7d20\u5931\u8d25:",t)}try{window.URL.revokeObjectURL(n)}catch(t){console.error("\u91ca\u653eBlob URL\u5931\u8d25:",t)}}}else console.error("\u65e0\u6cd5\u6dfb\u52a0\u4e0b\u8f7d\u94fe\u63a5\u5230DOM\uff0cdocument.body\u4e0d\u53ef\u7528"),window.URL.revokeObjectURL(n)}catch(a){console.error("\u6267\u884c\u4e0b\u8f7d\u64cd\u4f5c\u5931\u8d25:",a);try{window.URL.revokeObjectURL(n)}catch(t){}}})(),Be("\u5bfc\u51fa\u6210\u529f")}catch(e){console.error("\u5bfc\u51fa\u6570\u636e\u5931\u8d25:",e),Be("\u5bfc\u51fa\u6570\u636e\u5931\u8d25","error")}finally{t(!1),Pe(!1)}else Be("\u8bf7\u5148\u9009\u62e9\u73ed\u7ea7","warning")},startIcon:(0,N.jsx)(Y.A,{}),sx:{mr:1},children:"\u5bfc\u51fa\u6570\u636e"}),(0,N.jsx)(A.A,{variant:"outlined",onClick:()=>{ee?"CUSTOM"===Fe&&Ee[0]&&Ee[1]?(console.log("\u5237\u65b0\uff1a\u4f7f\u7528\u81ea\u5b9a\u4e49\u65e5\u671f\u8303\u56f4\u67e5\u8be2"),et(ee,Ee[0],Ee[1])):(console.log("\u5237\u65b0\uff1a\u4f7f\u7528\u6807\u51c6\u65f6\u95f4\u6bb5\u67e5\u8be2:",Fe),Ke(ee,Fe)):Be("\u8bf7\u5148\u9009\u62e9\u73ed\u7ea7","warning")},startIcon:(0,N.jsx)(E.A,{}),children:"\u5237\u65b0"})]})]}),(0,N.jsxs)(j.A,{value:Fe,onChange:(e,t)=>{console.log("\u5207\u6362\u5230\u65f6\u95f4\u6bb5: ".concat(t)),"CUSTOM"===t?(We(!0),ke(t),ie(t),Ee[0]&&Ee[1]&&ee&&et(ee,Ee[0],Ee[1])):(We(!1),ke(t),ee&&Ke(ee,t),ie(t))},sx:{borderBottom:1,borderColor:"divider",mb:2},children:[(0,N.jsx)(D.A,{value:"WEEK",label:"\u672c\u5468"}),(0,N.jsx)(D.A,{value:"MONTH",label:"\u672c\u6708"}),(0,N.jsx)(D.A,{value:"CUSTOM",label:"\u81ea\u5b9a\u4e49\u65e5\u671f"})]}),He&&(0,N.jsx)(i.A,{sx:{display:"flex",alignItems:"center",mb:2,mt:2},children:(0,N.jsxs)(L.$,{dateAdapter:O.h,adapterLocale:q.g,children:[(0,N.jsx)(R.l,{label:"\u5f00\u59cb\u65e5\u671f",value:Ee[0],onChange:e=>{ze([e,Ee[1]])},slotProps:{textField:{size:"small",sx:{mr:2}}}}),(0,N.jsx)(R.l,{label:"\u7ed3\u675f\u65e5\u671f",value:Ee[1],onChange:e=>{ze([Ee[0],e])},slotProps:{textField:{size:"small",sx:{mr:2}}}}),(0,N.jsx)(A.A,{variant:"contained",color:"primary",disabled:!Ee[0]||!Ee[1],onClick:()=>{Ee[0]&&Ee[1]&&ee?(ke("CUSTOM"),ie("CUSTOM"),et(ee,Ee[0],Ee[1])):Be("\u8bf7\u9009\u62e9\u5b8c\u6574\u7684\u65e5\u671f\u8303\u56f4","warning")},children:"\u67e5\u8be2"})]})}),(0,N.jsx)(C.A,{children:(0,N.jsxs)(S.A,{stickyHeader:!0,"aria-label":"\u5b66\u751f\u6392\u540d\u8868\u683c",children:[(0,N.jsx)(I.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(k.A,{children:"\u6392\u540d"}),(0,N.jsx)(k.A,{children:"\u5b66\u751f\u59d3\u540d"}),(0,N.jsx)(k.A,{children:"\u73ed\u7ea7"}),(0,N.jsx)(k.A,{children:"\u5c0f\u7ea2\u82b1\u6570\u91cf"}),(0,N.jsx)(k.A,{children:"\u6700\u8fd1\u83b7\u5f97\u65e5\u671f"})]})}),(0,N.jsx)(M.A,{children:0===de.length?(0,N.jsx)(F.A,{children:(0,N.jsx)(k.A,{colSpan:5,align:"center",children:"\u6682\u65e0\u6570\u636e"})}):de.map((e=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(k.A,{children:e.id}),(0,N.jsx)(k.A,{children:e.name}),(0,N.jsx)(k.A,{children:e.className}),(0,N.jsx)(k.A,{children:(0,N.jsx)(l.A,{sx:{color:"#1890ff",fontWeight:"bold"},children:e.flowerCount})}),(0,N.jsx)(k.A,{children:e.lastRewardDate})]},e.id)))})]})})]}),(0,N.jsxs)(f.A,{sx:{p:2},elevation:1,children:[(0,N.jsx)(l.A,{variant:"h6",sx:{mb:2},children:"\u5c0f\u7ea2\u82b1\u7edf\u8ba1\u5206\u6790"}),(0,N.jsxs)(i.A,{sx:{position:"relative",height:400,width:"100%"},children:[e&&(0,N.jsx)(i.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:10},children:(0,N.jsx)(y.A,{})}),(0,N.jsx)(i.A,{ref:Ue,sx:{height:"100%",width:"100%"}})]})]}),(0,N.jsxs)(o.A,{open:fe,onClose:Qe,maxWidth:"md",fullWidth:!0,"aria-labelledby":"reward-dialog-title",children:[(0,N.jsx)(r.A,{id:"reward-dialog-title",children:(0,N.jsx)(l.A,{variant:"h5",children:"\u53d1\u653e\u5c0f\u7ea2\u82b1"})}),(0,N.jsx)(c.A,{children:(0,N.jsx)(i.A,{component:"form",ref:Ne,sx:{mt:2},children:(0,N.jsxs)(d.A,{spacing:3,children:[(0,N.jsxs)(u.A,{fullWidth:!0,error:!!Se.studentId,children:[(0,N.jsx)(h.A,{id:"student-select-label",children:"\u5b66\u751f\u59d3\u540d"}),J?(0,N.jsx)(p.A,{labelId:"student-select-label",value:ge||"",onChange:e=>{const t=e.target.value;console.log("\u9009\u62e9\u5b66\u751f:",t),xe(t),Se.studentId&&Ie((e=>{const t=(0,s.A)({},e);return delete t.studentId,t}))},label:"\u5b66\u751f\u59d3\u540d",children:he.map((e=>(0,N.jsx)(g.A,{value:e.value,children:e.label},e.value)))}):(0,N.jsx)(p.A,{labelId:"student-select-label",value:"",label:"\u5b66\u751f\u59d3\u540d",disabled:!0,children:(0,N.jsx)(g.A,{value:"",children:"\u52a0\u8f7d\u4e2d..."})}),Se.studentId&&(0,N.jsx)(x.A,{children:Se.studentId})]}),(0,N.jsxs)(u.A,{fullWidth:!0,error:!!Se.flowerCount,children:[(0,N.jsx)(m.A,{label:"\u5c0f\u7ea2\u82b1\u6570\u91cf",type:"number",value:me,onChange:e=>{const t=parseInt(e.target.value);we(isNaN(t)?1:Math.max(1,t)),Se.flowerCount&&Ie((e=>{const t=(0,s.A)({},e);return delete t.flowerCount,t}))},InputProps:{inputProps:{min:1,max:100}},variant:"outlined"}),Se.flowerCount&&(0,N.jsx)(x.A,{children:Se.flowerCount})]}),(0,N.jsxs)(u.A,{fullWidth:!0,error:!!Se.reason,children:[(0,N.jsx)(h.A,{id:"reason-select-label",children:"\u53d1\u653e\u539f\u56e0"}),(0,N.jsxs)(p.A,{labelId:"reason-select-label",value:Ae,onChange:e=>{ye(e.target.value),Se.reason&&Ie((e=>{const t=(0,s.A)({},e);return delete t.reason,t}))},label:"\u53d1\u653e\u539f\u56e0",children:[(0,N.jsx)(g.A,{value:"\u8bfe\u5802\u8868\u73b0\u4f18\u79c0",children:"\u8bfe\u5802\u8868\u73b0\u4f18\u79c0"}),(0,N.jsx)(g.A,{value:"\u4f5c\u4e1a\u5b8c\u6210\u51fa\u8272",children:"\u4f5c\u4e1a\u5b8c\u6210\u51fa\u8272"}),(0,N.jsx)(g.A,{value:"\u79ef\u6781\u53c2\u4e0e\u6d3b\u52a8",children:"\u79ef\u6781\u53c2\u4e0e\u6d3b\u52a8"}),(0,N.jsx)(g.A,{value:"\u5176\u4ed6\u8868\u73b0",children:"\u5176\u4ed6\u8868\u73b0"})]}),Se.reason&&(0,N.jsx)(x.A,{children:Se.reason})]}),(0,N.jsx)(u.A,{fullWidth:!0,children:(0,N.jsx)(m.A,{label:"\u5907\u6ce8\u8bf4\u660e",multiline:!0,rows:3,value:Me,onChange:e=>Re(e.target.value),placeholder:"\u8bf7\u8f93\u5165\u66f4\u8be6\u7ec6\u7684\u5956\u52b1\u8bf4\u660e\uff08\u9009\u586b\uff09",variant:"outlined",helperText:"\u6700\u591a200\u5b57",inputProps:{maxLength:200}})}),(0,N.jsx)(L.$,{dateAdapter:O.h,adapterLocale:q.g,children:(0,N.jsx)(u.A,{fullWidth:!0,error:!!Se.rewardDate,children:(0,N.jsx)(R.l,{label:"\u53d1\u653e\u65e5\u671f",value:ve,onChange:e=>{be(e),Se.rewardDate&&Ie((e=>{const t=(0,s.A)({},e);return delete t.rewardDate,t}))},slotProps:{textField:{fullWidth:!0,variant:"outlined",error:!!Se.rewardDate,helperText:Se.rewardDate}}})})})]})})}),(0,N.jsxs)(w.A,{children:[(0,N.jsx)(A.A,{onClick:Qe,color:"inherit",children:"\u53d6\u6d88"}),(0,N.jsx)(A.A,{onClick:Ze,variant:"contained",color:"primary",disabled:De,startIcon:De?(0,N.jsx)(y.A,{size:24}):null,children:"\u53d1\u653e"})]})]})]})}}}]);
//# sourceMappingURL=322.42683243.chunk.js.map