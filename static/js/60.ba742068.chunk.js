"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[60],{45171:(e,s,n)=>{n.d(s,{A:()=>r});var o=n(89379);const t=n(79722).A.create({timeout:3e4,headers:{"Content-Type":"application/json"}});t.interceptors.request.use((e=>{var s;const n=localStorage.getItem("token");return e.url&&!e.url.startsWith("/")&&(e.url="/"+e.url),console.log("\u53d1\u9001\u8bf7\u6c42: ".concat(null===(s=e.method)||void 0===s?void 0:s.toUpperCase()," ").concat(e.url)),console.log("\u8bf7\u6c42\u5934:",e.headers),e.data&&console.log("\u8bf7\u6c42\u6570\u636e:","object"===typeof e.data?(0,o.A)((0,o.A)({},e.data),{},{password:e.data.password?"***":void 0,newPassword:e.data.newPassword?"***":void 0}):e.data),n&&(console.log("\u6dfb\u52a0\u8ba4\u8bc1\u5934: Bearer Token"),e.headers.Authorization="Bearer ".concat(n)),e}),(e=>(console.error("\u8bf7\u6c42\u9519\u8bef:",e),Promise.reject(e)))),t.interceptors.response.use((e=>(console.log("\u54cd\u5e94: ".concat(e.status," ").concat(e.config.url)),console.log("\u54cd\u5e94\u6570\u636e:",e.data),e)),(e=>{if("ECONNABORTED"===e.code&&e.message&&e.message.includes("timeout"))console.error("\u8bf7\u6c42\u8d85\u65f6:",e.config.url);else if(e.response){if(console.error("\u54cd\u5e94\u9519\u8bef:",e.response.status,e.response.data),401===e.response.status||403===e.response.status){if(e.config.url&&(e.config.url.includes("/auth/change-password")||e.config.url.includes("/api/auth/change-password")||e.config.url.includes("/auth/reset-password-with-code")||e.config.url.includes("/api/auth/reset-password-with-code")))return console.log("\u5bc6\u7801\u76f8\u5173\u8bf7\u6c42\u5931\u8d25\uff0c\u4f46\u4e0d\u91cd\u5b9a\u5411"),Promise.reject(e);console.error("\u8ba4\u8bc1\u9519\u8bef:",e.response.data),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login?redirect="+encodeURIComponent(window.location.pathname))}}else console.error("\u7f51\u7edc\u9519\u8bef:",e.message);return Promise.reject(e)}));const r=t},64017:(e,s,n)=>{n.d(s,{Fb:()=>a,Nj:()=>t,gg:()=>i,iQ:()=>c,tZ:()=>r});const o=n(45171).A.create({baseURL:"http://124.70.74.246:8081",timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e)));const t=async()=>(console.log("\u83b7\u53d6\u6240\u6709\u79d1\u76ee\uff0c\u76f4\u63a5\u8bf7\u6c42\u540e\u7aef"),o.get("/api/subjects")),r=async(e,s)=>o.get("/api/subjects/paged",{params:{page:e,size:s,sortBy:"id",direction:"asc"}}),a=async e=>o.post("/api/subjects",e),c=async(e,s)=>o.put("/api/subjects/".concat(e),s),i=async e=>o.delete("/api/subjects/".concat(e))},78060:(e,s,n)=>{n.r(s),n.d(s,{default:()=>R});var o=n(89379),t=n(65043),r=n(53969),a=n(91244),c=n(7240),i=n(12097),l=n(16128),d=n(28259),p=n(94799),u=n(87443),h=n(10756),A=n(86172),x=n(81341),m=n(34375),j=n(80172),g=n(70298),w=n(12272),f=n(38517),S=n(81911),v=n(78776),y=n(24343),C=n(55895),b=n(48640),P=n(85877),k=n(70916),I=n(91449),N=n(22950),T=n(61773),W=n(5362),z=n(22672),B=n(64017),D=n(70579);const R=()=>{const[e,s]=(0,t.useState)([]),[n,R]=(0,t.useState)(!1),[E,O]=(0,t.useState)(0),[F,q]=(0,t.useState)(10),[L,U]=(0,t.useState)(1),[G,Q]=(0,t.useState)(!1),[Z,_]=(0,t.useState)(!1),[H,J]=(0,t.useState)({id:"",name:"",score:100,passScore:60,description:""}),[K,M]=(0,t.useState)(!1),[V,X]=(0,t.useState)({}),[Y,$]=(0,t.useState)({open:!1,message:"",severity:"success"}),[ee,se]=(0,t.useState)({open:!1,title:"",content:"",onConfirm:()=>{}}),ne=function(e){$({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})},oe=()=>{$((e=>(0,o.A)((0,o.A)({},e),{},{open:!1})))},te=()=>{se((e=>(0,o.A)((0,o.A)({},e),{},{open:!1})))},re=(0,t.useCallback)((async()=>{R(!0);try{const e=await B.tZ(L-1,F);e.data&&(s(e.data.content),O(e.data.totalElements))}catch(e){console.error("\u83b7\u53d6\u79d1\u76ee\u5217\u8868\u5931\u8d25:",e),ne("\u83b7\u53d6\u79d1\u76ee\u5217\u8868\u5931\u8d25","error")}finally{R(!1)}}),[L,F]),ae=async e=>{var s,n;s="\u5220\u9664\u79d1\u76ee",n='\u786e\u5b9a\u8981\u5220\u9664\u79d1\u76ee"'.concat(e.name,'"\u5417\uff1f'),se({open:!0,title:s,content:n,onConfirm:async()=>{try{R(!0),await B.gg(e.id),ne("\u5220\u9664\u6210\u529f","success"),re()}catch(s){console.error("\u5220\u9664\u79d1\u76ee\u5931\u8d25:",s),ne("\u5220\u9664\u79d1\u76ee\u5931\u8d25","error")}finally{R(!1)}}})};return(0,t.useEffect)((()=>{re()}),[re]),(0,D.jsxs)(r.A,{className:"subject-container",children:[(0,D.jsxs)(a.A,{sx:{mb:3},children:[(0,D.jsx)(c.A,{title:"\u79d1\u76ee\u7ba1\u7406",action:(0,D.jsx)(i.A,{variant:"contained",color:"primary",startIcon:(0,D.jsx)(N.A,{}),onClick:()=>{_(!1),J({id:"",name:"",score:100,passScore:60,description:""}),X({}),Q(!0)},children:"\u6dfb\u52a0\u79d1\u76ee"})}),(0,D.jsxs)(l.A,{children:[(0,D.jsx)(d.A,{component:p.A,children:(0,D.jsxs)(u.A,{children:[(0,D.jsx)(h.A,{children:(0,D.jsxs)(A.A,{children:[(0,D.jsx)(x.A,{width:"80",children:"ID"}),(0,D.jsx)(x.A,{width:"150",children:"\u79d1\u76ee\u540d\u79f0"}),(0,D.jsx)(x.A,{width:"100",children:"\u6ee1\u5206"}),(0,D.jsx)(x.A,{width:"100",children:"\u53ca\u683c\u5206"}),(0,D.jsx)(x.A,{children:"\u63cf\u8ff0"}),(0,D.jsx)(x.A,{width:"180",align:"center",children:"\u64cd\u4f5c"})]})}),(0,D.jsx)(m.A,{children:n?(0,D.jsx)(A.A,{children:(0,D.jsx)(x.A,{colSpan:6,align:"center",children:(0,D.jsx)(j.A,{})})}):0===e.length?(0,D.jsx)(A.A,{children:(0,D.jsx)(x.A,{colSpan:6,align:"center",children:"\u6682\u65e0\u6570\u636e"})}):e.map((e=>(0,D.jsxs)(A.A,{children:[(0,D.jsx)(x.A,{children:e.id}),(0,D.jsx)(x.A,{children:e.name}),(0,D.jsx)(x.A,{children:e.score}),(0,D.jsx)(x.A,{children:e.passScore}),(0,D.jsx)(x.A,{children:e.description}),(0,D.jsx)(x.A,{align:"center",children:(0,D.jsxs)(g.A,{direction:"row",spacing:1,justifyContent:"center",children:[(0,D.jsx)(i.A,{size:"small",variant:"contained",startIcon:(0,D.jsx)(T.A,{}),onClick:()=>(e=>{_(!0),J((0,o.A)({},e)),X({}),Q(!0)})(e),sx:{minWidth:"80px",whiteSpace:"nowrap",px:1},children:"\u7f16\u8f91"}),(0,D.jsx)(i.A,{size:"small",variant:"contained",color:"error",startIcon:(0,D.jsx)(W.A,{}),onClick:()=>ae(e),sx:{minWidth:"80px",whiteSpace:"nowrap",px:1},children:"\u5220\u9664"})]})})]},e.id)))})]})}),(0,D.jsx)(w.A,{component:"div",count:E,page:L-1,onPageChange:(e,s)=>{U(s+1)},rowsPerPage:F,onRowsPerPageChange:e=>{q(parseInt(e.target.value,10)),U(1)},rowsPerPageOptions:[5,10,25,50],labelRowsPerPage:"\u6bcf\u9875\u884c\u6570",labelDisplayedRows:e=>{let{from:s,to:n,count:o}=e;return"".concat(s,"-").concat(n," \u5171 ").concat(o)}})]})]}),(0,D.jsxs)(f.A,{open:G,onClose:()=>Q(!1),maxWidth:"sm",fullWidth:!0,TransitionProps:{onEntered:()=>{const e=document.querySelector('input[name="subject-name"]');e&&e.focus()}},children:[(0,D.jsx)(S.A,{children:Z?"\u7f16\u8f91\u79d1\u76ee":"\u6dfb\u52a0\u79d1\u76ee"}),(0,D.jsx)(v.A,{children:(0,D.jsxs)(r.A,{sx:{pt:2,minWidth:400},children:[(0,D.jsx)(y.A,{label:"\u79d1\u76ee\u540d\u79f0",fullWidth:!0,value:H.name,onChange:e=>J((0,o.A)((0,o.A)({},H),{},{name:e.target.value})),margin:"normal",error:!!V.name,helperText:V.name,autoFocus:!0,name:"subject-name",inputProps:{autoComplete:"off"}}),(0,D.jsxs)(r.A,{sx:{mt:2},children:[(0,D.jsx)(C.A,{gutterBottom:!0,children:"\u6ee1\u5206"}),(0,D.jsxs)(g.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,D.jsx)(b.Ay,{value:H.score,onChange:(e,s)=>{const n=s,t=H.passScore>n?n:H.passScore;J((0,o.A)((0,o.A)({},H),{},{score:n,passScore:t}))},min:0,max:150,step:5,valueLabelDisplay:"auto",sx:{flexGrow:1}}),(0,D.jsx)(y.A,{value:H.score,onChange:e=>{const s=parseInt(e.target.value,10);if(!isNaN(s)){const e=H.passScore>s?s:H.passScore;J((0,o.A)((0,o.A)({},H),{},{score:s,passScore:e}))}},type:"number",sx:{width:80},InputProps:{inputProps:{min:0,max:150},autoComplete:"off"},error:!!V.score,helperText:V.score})]})]}),(0,D.jsxs)(r.A,{sx:{mt:2},children:[(0,D.jsx)(C.A,{gutterBottom:!0,children:"\u53ca\u683c\u5206"}),(0,D.jsxs)(g.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,D.jsx)(b.Ay,{value:H.passScore,onChange:(e,s)=>J((0,o.A)((0,o.A)({},H),{},{passScore:s})),min:0,max:H.score,step:5,valueLabelDisplay:"auto",sx:{flexGrow:1}}),(0,D.jsx)(y.A,{value:H.passScore,onChange:e=>{const s=parseInt(e.target.value,10);isNaN(s)||J((0,o.A)((0,o.A)({},H),{},{passScore:s}))},type:"number",sx:{width:80},InputProps:{inputProps:{min:0,max:H.score},autoComplete:"off"},error:!!V.passScore,helperText:V.passScore})]})]}),(0,D.jsx)(y.A,{label:"\u63cf\u8ff0",fullWidth:!0,multiline:!0,rows:4,value:H.description,onChange:e=>J((0,o.A)((0,o.A)({},H),{},{description:e.target.value})),margin:"normal",name:"subject-description",inputProps:{autoComplete:"off"}})]})}),(0,D.jsxs)(P.A,{children:[(0,D.jsx)(i.A,{onClick:()=>Q(!1),children:"\u53d6\u6d88"}),(0,D.jsx)(i.A,{variant:"contained",color:"primary",onClick:async()=>{if((()=>{const e={};return H.name?H.name.length>50&&(e.name="\u79d1\u76ee\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"):e.name="\u8bf7\u8f93\u5165\u79d1\u76ee\u540d\u79f0",H.score<0&&(e.score="\u6ee1\u5206\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),H.passScore<0&&(e.passScore="\u53ca\u683c\u5206\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),H.passScore>H.score&&(e.passScore="\u53ca\u683c\u5206\u4e0d\u80fd\u5927\u4e8e\u6ee1\u5206"),X(e),0===Object.keys(e).length})()){M(!0);try{Z?(await B.iQ(H.id,H),ne("\u66f4\u65b0\u6210\u529f","success")):(await B.Fb(H),ne("\u6dfb\u52a0\u6210\u529f","success")),Q(!1),re()}catch(n){var e,s;console.error("\u4fdd\u5b58\u79d1\u76ee\u5931\u8d25:",n);const o=n;null!==(e=o.response)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.message?ne(o.response.data.message,"error"):ne("\u4fdd\u5b58\u79d1\u76ee\u5931\u8d25","error")}finally{M(!1)}}},disabled:K,startIcon:K?(0,D.jsx)(j.A,{size:24}):(0,D.jsx)(z.A,{}),children:Z?"\u66f4\u65b0":"\u6dfb\u52a0"})]})]}),(0,D.jsx)(k.A,{open:Y.open,autoHideDuration:3e3,onClose:oe,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,D.jsx)(I.A,{onClose:oe,severity:Y.severity,variant:"filled",sx:{width:"100%"},children:Y.message})}),(0,D.jsxs)(f.A,{open:ee.open,onClose:te,children:[(0,D.jsx)(S.A,{children:ee.title}),(0,D.jsx)(v.A,{children:(0,D.jsx)(C.A,{children:ee.content})}),(0,D.jsxs)(P.A,{children:[(0,D.jsx)(i.A,{onClick:te,children:"\u53d6\u6d88"}),(0,D.jsx)(i.A,{onClick:()=>{ee.onConfirm(),te()},color:"error",variant:"contained",autoFocus:!0,children:"\u786e\u5b9a\u5220\u9664"})]})]})]})}}}]);
//# sourceMappingURL=60.ba742068.chunk.js.map